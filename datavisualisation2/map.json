{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 480,
  "height": 391,
  "title": "Diversity of Universities in Melbourne",
  "projection": {"type":"equirectangular"},
  "params": [
    {
      "name": "isr_slider",
      "value": 0,
      "bind"  : {  
        "input"  :  "range"  ,  
        "min"  :  0  ,  
        "max"  :  100  ,  
        "step"  :  10  ,  
        "name"  :  "International Student Ratio: "  
      } 
    }
  ],
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/kaiang0012/3179/main/output_melbourne.json",
        "format": {
          "type":"topojson",
          "feature": "Metro Partnership Boundaries_region"
        }
      },
      "mark": {
        "type": "geoshape",
        "fill":"lightgray",
        "stroke": "white"
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/kaiang0012/3179/main/melbourne_universities.csv"
      },
      "transform": [
        {
          "filter": "datum.isr_score>isr_slider"
        }
      ],
      "mark": {
        "type":"circle"
      },
      "encoding": {
        "longitude": {
          "field":"longitude",
          "type": "quantitative"
        }, 
        "latitude": {
          "field":"latitude",
          "type": "quantitative"
        },
        "color": { 
          "field":"ifr_score", 
          "type":"quantitative", 
          "title":"International Faculty Ratio Score", 
          "scale": {"scheme":"reds"}
        },
        "size": { 
          "field":"isr_score", 
          "type":"quantitative", 
          "title":"International Student Ratio Score",
          "scale": {"domain":[0,100]}
        },
        "tooltip": [
          {"field": "institution", "type": "ordinal", "title": "Institution"},
          {"field": "Rank", "type": "quantitative", "title": "World Rank"},
          {"field": "ar_score", "type": "quantitative", "title": "Academic Ratio Score"},
          {"field": "isr_score", "type": "quantitative", "title": "International Student Ratio Score"}
        ]
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/kaiang0012/3179/main/melbourne_universities.csv"
      },
      "mark": {
        "type": "text",
        "baseline":"middle",
        "dy": -16
      },
      "transform": [
        {
          "filter": "datum['institution']=='Monash University' || datum['institution']=='The University of Melbourne'"
        },
        {
          "filter": "datum.isr_score>isr_slider"
        }
      ],
      "encoding": {
        "text": {
          "field": "institution", 
          "type": "nominal"
        },
        "longitude": {
          "field":"longitude",
          "type": "quantitative"
        }, 
        "latitude": {
          "field":"latitude",
          "type": "quantitative"
        }
      }
    } 
  ]
}
